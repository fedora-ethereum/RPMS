From: Peter Lemenkov <lemenkov@gmail.com>
Date: Fri, 27 Jan 2023 10:39:15 +0100
Subject: [PATCH] Suppress function-scoped fixtures warnings

Signed-off-by: Peter Lemenkov <lemenkov@gmail.com>

diff --git a/tests/backends/test_backends.py b/tests/backends/test_backends.py
index efde14b..598804c 100644
--- a/tests/backends/test_backends.py
+++ b/tests/backends/test_backends.py
@@ -139,6 +139,7 @@ def test_compress_public_key_bytes(key_api, key_fixture):
 @given(
     private_key_bytes=private_key_st,
 )
+@settings(suppress_health_check=(HealthCheck.function_scoped_fixture,))
 def test_compress_decompress_inversion(key_api, private_key_bytes):
     private_key = key_api.PrivateKey(private_key_bytes)
 
@@ -152,6 +153,7 @@ def test_compress_decompress_inversion(key_api, private_key_bytes):
     private_key_bytes=private_key_st,
     message_hash=message_hash_st,
 )
+@settings(suppress_health_check=(HealthCheck.function_scoped_fixture,))
 def test_signatures_with_high_s(key_api, private_key_bytes, message_hash):
     private_key = key_api.PrivateKey(private_key_bytes)
     low_s_signature = private_key.sign_msg_hash(message_hash)
diff --git a/tests/backends/test_native_backend_against_coincurve.py b/tests/backends/test_native_backend_against_coincurve.py
index 28fd440..1c0e659 100644
--- a/tests/backends/test_native_backend_against_coincurve.py
+++ b/tests/backends/test_native_backend_against_coincurve.py
@@ -6,6 +6,7 @@ from eth_utils import (
 from hypothesis import (
     given,
     settings,
+    HealthCheck,
     strategies as st,
 )
 from strategies import (
@@ -44,7 +45,7 @@ def coincurve_key_api():
 @given(
     private_key_bytes=private_key_st,
 )
-@settings(max_examples=MAX_EXAMPLES)
+@settings(max_examples=MAX_EXAMPLES, suppress_health_check=(HealthCheck.function_scoped_fixture,))
 def test_public_key_generation_is_equal(
     private_key_bytes, native_key_api, coincurve_key_api
 ):
@@ -58,7 +59,7 @@ def test_public_key_generation_is_equal(
     private_key_bytes=private_key_st,
     message_hash=message_hash_st,
 )
-@settings(max_examples=MAX_EXAMPLES)
+@settings(max_examples=MAX_EXAMPLES, suppress_health_check=(HealthCheck.function_scoped_fixture,))
 def test_signing_is_equal(
     private_key_bytes, message_hash, native_key_api, coincurve_key_api
 ):
@@ -90,7 +91,7 @@ def test_signing_is_equal(
         st.just("native-to-coincurve"),
     ),
 )
-@settings(max_examples=MAX_EXAMPLES)
+@settings(max_examples=MAX_EXAMPLES, suppress_health_check=(HealthCheck.function_scoped_fixture,))
 def test_native_to_coincurve_recover(
     private_key_bytes, message_hash, direction, native_key_api, coincurve_key_api
 ):
@@ -120,7 +121,7 @@ def test_native_to_coincurve_recover(
         st.just("native-to-coincurve"),
     ),
 )
-@settings(max_examples=MAX_EXAMPLES)
+@settings(max_examples=MAX_EXAMPLES, suppress_health_check=(HealthCheck.function_scoped_fixture,))
 def test_coincurve_to_native_invalid_signatures(
     message_hash, signature_bytes, direction, native_key_api, coincurve_key_api
 ):
@@ -164,6 +165,7 @@ def test_coincurve_to_native_invalid_signatures(
 @given(
     private_key_bytes=private_key_st,
 )
+@settings(suppress_health_check=(HealthCheck.function_scoped_fixture,))
 def test_public_key_compression_is_equal(
     private_key_bytes, native_key_api, coincurve_key_api
 ):
@@ -179,6 +181,7 @@ def test_public_key_compression_is_equal(
 @given(
     private_key_bytes=private_key_st,
 )
+@settings(suppress_health_check=(HealthCheck.function_scoped_fixture,))
 def test_public_key_decompression_is_equal(
     private_key_bytes, native_key_api, coincurve_key_api
 ):
